<html>
<script>

// 제목을 넘버링하고
// 목차를 생성
// 제목과 전체 전체 section을 묶어서 이동 가능하게
// section 은 다수의 paragraph로 구성
// 또는 div 로 묶기 


var toc = document.getElementById("TOC");
    if (!toc) {
        toc = document.createElement("div");
        toc.id = "TOC"
        document.body.insertBefore(toc, document.body.firstChild);
    }

    var headings;
    if (document.querySelectorAll)
        headings = document.querySelectorAll("h1,h2,h3,h4,h5,h6");
    else
        headings = findHeadings(document.body, []);

    //내장함수
    function findHeadings(root, sects) { // 위 headings 에서 호출함              
        for (var c = root.firstChild; c != null; c = c.nextSibling) { //전체 태그 순회              
            if (c.nodeType !==1) continue;
            if (c.tagName.length == 2 && c.tagName.charAt(0) == "H")
                sects.push(c);
            else findHeadings(c, sects);
        }
        return sects; //매개변수에 추가하여 반환 가능
    }

</script>

<body>
<h1>Book1</h1>
<h2>Chapter1</h2>
<h2>Chapter2</h2>
<h3>Section1</h3>
<h3>Section2</h3>
<h3>Section3</h3>
<h2>Chapter3</h2>


<h1>Book2</h1>
<h2>Chapter1</h2>
<h2>Chapter2</h2>
<h3>Section1</h3>
<h3>Section2</h3>
<h3>Section3</h3>
<h2>Chapter3</h2>
<h3>Section1</h3>
<h3>Section2</h3>
<h3>Section3</h3>

<h1>Book3</h1>
<h2>Chapter1</h2>
<h2>Chapter2</h2>
<h3>Section1</h3>
<h3>Section2</h3>
<h3>Section3</h3>
<h2>Chapter3</h2>

</body>
</html>